(function(a){a.fn.jphotogrid=function(e,j){e=a.extend(true,{activeClass:"active",selectedClass:"selected",baseCSS:{},selectedCSS:{}},e);var b=e.flickrbase+e.feedapi+"?";var g=true;function d(k){a(k).children().each(function(){var l=a(this).position();a(this).data("ptop",Math.floor(Number(l.top))+"px");a(this).data("pleft",Math.floor(Number(l.left))+"px")}).each(function(){c(this)})}function c(o,k,p){var n=a(o).data("ptop");var l=a(o).data("pleft");var m=a.extend({top:n,left:l},e.baseCSS);if(k){a(o).animate(m,"slow",function(){if(a.isFunction(p)){p()}})}else{a(o).css(a.extend(m,{position:"absolute"}))}}function f(k){$container.find("."+e.selectedClass).each(function(){a(this).removeClass(e.selectedClass);c(this,true)});if(a.isFunction(k)){k()}}function h(k){f(function(){a(k).addClass("selected").removeClass("active");a(k).animate(e.selectedCSS,"slow")})}for(var i in e.qstrings){if(!g){b+="&"}b+=i+"="+e.qstrings[i];g=false}return a(this).each(function(){$container=a(this);a(this).css("position","relative");d(this);a(this).children().css("cursor","pointer").hover(function(){if(!a(this).hasClass(e.selectedClass)){a(this).addClass(e.activeClass)}},function(){a(this).removeClass(e.activeClass)});a(this).on("click","."+e.activeClass,function(){h(this)});a(this).on("click","."+e.selectedClass,function(){console.log("hola");f()});a(this).find("div").hover(function(){a(this).css("opacity",0)},function(){a(this).css("opacity",0.5)}).click(function(){a(this).css("opacity",0);$li=a(this).parent();$li.css("z-index",99);$li.animate({top:0,left:0,width:"100%",height:"400px"},"slow")})})}})(jQuery);